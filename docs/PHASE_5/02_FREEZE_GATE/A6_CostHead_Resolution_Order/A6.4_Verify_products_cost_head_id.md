# A6.4 — Verify products.cost_head_id exists

**Phase:** Phase-5  
**Category:** A — Freeze Gate Verification  
**Item:** A6.4  
**Status:** ✅ VERIFIED (Freeze-ready)  
**Date:** 2026-01-27  
**Purpose:** Confirm `products.cost_head_id` exists so it can act as the default fallback in CostHead resolution (A6.3).

⸻

## Evidence

**Migration sources to check (zero-risk):**
1. Search in: `backend/alembic/versions/20260104_110400_create_schema_canon_v1_0_l1_l2_quo_pricing.py`
2. Keywords:
   - `create_table('products'`
   - `cost_head_id`
   - `ForeignKeyConstraint(['cost_head_id'], ['cost_heads.id']`

⸻

## Findings

✅ **Column exists:** `products.cost_head_id`
- Type: `BIGINT`
- Nullable: Yes (optional default)

✅ **FK exists:** `products.cost_head_id` → `cost_heads.id`
- On-delete policy: `SET NULL` (safe because it is an optional default)

✅ **Index exists:**
- `idx_products_cost_head_id` on `cost_head_id` (verified exact name)

⸻

## Conclusion

**• Freeze gate decision:** ✅ APPROVED  
**• Notes:** Product-level default CostHead is schema-supported and can be used as fallback per A6.3.

⸻

## Quick Verify Commands

```bash
rg -n "create_table\('products'" backend/alembic/versions
rg -n "cost_head_id" backend/alembic/versions | rg "products"
rg -n "ForeignKeyConstraint\(\['cost_head_id'\], \['cost_heads\.id'\]" backend/alembic/versions
```

