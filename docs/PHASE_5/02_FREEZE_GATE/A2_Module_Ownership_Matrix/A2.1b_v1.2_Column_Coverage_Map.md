# ✅ A2.1b — v1.2 Column Coverage Map (Catalog + Price List)

**Phase:** Phase-5  
**Category:** A — Freeze Gate Verification  
**Item:** A2.1b  
**Status:** ✅ COMPLETED (Freeze-ready)  
**Date:** 2026-01-27  
**Purpose:** Ensure every v1.2 catalog/pricelist column is accounted for in SPEC-5 tables (either as direct columns, or via attribute/JSON registries), so we don't miss anything during A2 ownership or later dictionary work.

⸻

## 1) Canonical Mapping Principle (Locked)

**Where each v1.2 column must land:**
- **Commercial SKU fields** → `catalog_skus`
- **Price & effective dating** → `sku_prices` (append-only)
- **Taxonomy (Category/Subcategory/Type/ProductType)** → `categories`, `subcategories`, `product_types`
- **Make/Series master** → `makes`, `series`
- **Attributes** → `attributes` / `attribute_options` or `defined_spec_json` at L1 (where appropriate)
- **Legacy compatibility fields** → `products` / `prices` (transitional only)

⸻

## 2) v1.2 Column Coverage Map (Master Table)

**Use this table as the single checklist.**  
**Status codes:** ✅ Covered | ⚠️ Covered via alternate (attr/json/legacy) | ❌ Not covered (requires schema/action)

| v1.2 Column (Business) | Meaning / Example | Target (Preferred Table.Column) | Alternate Storage | Status | Notes / Action |
|-------------------------|-------------------|--------------------------------|-------------------|--------|----------------|
| Business Category | "Switchgear" | `categories.name` / `categories.code` | — | ✅ | If v1.2 has both name+code, store code in code |
| Business Subcategory | "Power Contactor" | `subcategories.name` / `subcategories.code` | `catalog_skus.business_subcategory` (if used as display string) | ⚠️ | Decide: normalized (subcategories) vs display-only field on SKU |
| Item / Product Type | "Contactor" | `product_types.name` / `product_types.code` | `catalog_skus.item_producttype` (display) | ⚠️ | Prefer normalized product_types, allow display label on SKU |
| Make | "Schneider" | `makes.name` | `catalog_skus.make` (if schema uses string) | ⚠️ | If catalog_skus stores make as string, keep makes as master for UI filters |
| Series | "TeSys Deca" | `series.name` | `catalog_skus.oem_series_range` | ⚠️ | Decide: normalize vs store as OEM string; both allowed if clear |
| Series Bucket | "LC1D / LC1E" | `catalog_skus.series_bucket` | `l1_intent_lines.series_bucket` | ✅ | Core v1.2 requirement — ensure consistent enum/values |
| OEM Catalog No / SKU | "LC1D09…" | `catalog_skus.oem_catalog_no` | — | ✅ | Must be unique per tenant+make |
| OEM Series Range | "TeSys Deca" | `catalog_skus.oem_series_range` | `series.name` | ⚠️ | If you normalize series, keep this as display range |
| UOM | "EA" | `catalog_skus.uom` | — | ✅ | Default = EA |
| Currency | "INR" | `sku_prices.currency` | — | ✅ | Default INR |
| Region | "INDIA" | `sku_prices.region` | — | ✅ | Default INDIA |
| Price List Name/Code | "Schneider-2026-01" | `price_lists.name` / `price_lists.code` | — | ✅ | Canonical |
| Price List Ref | "PL-REF-…" | `sku_prices.pricelist_ref` | — | ✅ | Keep as traceability |
| Rate / Unit Price | "1234.50" | `sku_prices.rate` | Legacy: `prices.rate` | ✅ | Append-only history |
| Effective From | date | `sku_prices.effective_from` | Legacy: `prices.effective_date` | ✅ | Must be used for lookup |
| Effective To | date/null | `sku_prices.effective_to` | — | ✅ | Supports supersession |
| Import Batch ID | batch fk | `sku_prices.import_batch_id` | — | ✅ | Traceability |
| Source File | filename | `sku_prices.source_file` | — | ✅ | Traceability |
| Source Row | row no | `sku_prices.source_row` | — | ✅ | Traceability |
| Notes / Remarks | text | `sku_prices.*` (add if exists) | `metadata_json` if available | ⚠️ | Only if needed; prefer audit metadata |
| Attributes (domain fields) | e.g., voltage/poles/rating | `attributes` + `attribute_options` (masters) | `l1_attributes` (KVU per L1) | ⚠️ | v1.2 may embed attributes in catalog: decide if they belong in L1 layer vs SKU master |
| SKU Technical Specs | JSON specs | — | `defined_spec_json` on L1 OR future `catalog_sku_attributes` | ⚠️ | If v1.2 has many columns, likely better as L1 attributes |
| ACL / Tags / Flags | "Hazardous" | — | `catalog_skus` optional column OR `attributes` | ⚠️ | Only if present in v1.2 |
| Discount eligibility | fixed vs normal | `quote_bom_items.rate_source` + guardrail G-06 | — | ✅ | Controlled at quotation line level |

⸻

## 3) "v1.2 Columns Not Yet Visible in A2.1 Table List" — How we handle

If you see v1.2 columns that don't cleanly map to the above, they typically fall into one of these buckets:

1. **Taxonomy extension** → add to `categories`/`subcategories`/`product_types`
2. **Commercial SKU display fields** → add to `catalog_skus`
3. **Pricing attributes / effective dating** → always `sku_prices`
4. **Engineering meaning** → L1 layer (`l1_intent_lines` + `l1_attributes`)
5. **Rare / optional metadata** → `metadata_json` (only if explicitly approved)

⸻

## 4) Action Outcome of A2.1b

✅ **We now have a single checklist that ensures:**
- Every catalog/pricelist column in v1.2 is mapped somewhere
- We don't mistakenly expect A2.1 (table list) to contain all business columns
- A2 ownership mapping will stay correct (tables → owners)
- Later dictionary work will not miss any v1.2 business fields

⸻

## 5) Next Step

➡️ **A2.2** — Map AUTH module tables (owner + responsibilities)

Say: "Proceed A2.2" and we'll start ownership mapping module-by-module.

