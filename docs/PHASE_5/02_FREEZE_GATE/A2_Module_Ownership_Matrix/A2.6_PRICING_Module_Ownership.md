# ✅ A2.6 — PRICING Module Ownership Matrix

**Phase:** Phase-5  
**Category:** A — Freeze Gate Verification  
**Item:** A2.6  
**Status:** ✅ COMPLETED (Freeze-ready)  
**Date:** 2026-01-27  
**Purpose:** Lock table ownership, change authority, and responsibility boundaries for PRICING tables including price lists, SKU price history, and price-import traceability.

⸻

## 1) Ownership Rule (Canonical)

- **Each table has one primary owner module.**
- **Owner module is accountable for:**
  - schema changes
  - validation rules
  - write-path APIs
  - data integrity guarantees
- **Non-owner modules may read via foreign keys, but must not introduce write logic without owner approval.**

⸻

## 2) PRICING Tables — Ownership & Responsibilities

### 2.1 Price List Masters

| Table | Primary Owner | Responsibility Scope | Write Authority | Key Constraints / Notes |
|-------|---------------|---------------------|-----------------|-------------------------|
| `price_lists` | PRICING | Price list header lifecycle (name/code/effective metadata) | PRICING only | Tenant-scoped. Used to group/import price rows and governance approvals |

⸻

### 2.2 Price Truth Layer (Append-Only)

| Table | Primary Owner | Responsibility Scope | Write Authority | Key Constraints / Notes |
|-------|---------------|---------------------|-----------------|-------------------------|
| `sku_prices` | PRICING | Canonical price history for L2 commercial identity | PRICING only | Append-only (no overwrites). Effective dating driven (`effective_from`/`to`). Used by pricing lookup |
| `prices` (legacy / transitional if exists) | PRICING (legacy) | Transitional legacy price table (product-based) | PRICING only | Allowed only for compatibility; canonical truth is `sku_prices` |

**Locked Principle:**
- Price truth lives in PRICING.
- QUO may snapshot applied rates on `quote_bom_items.rate`, but must not mutate `sku_prices`.

⸻

### 2.3 Import Traceability / Governance (if present)

| Table | Primary Owner | Responsibility Scope | Write Authority | Key Constraints / Notes |
|-------|---------------|---------------------|-----------------|-------------------------|
| `import_batches` (if exists) | PRICING | Import batch identity, file lineage, batch status | PRICING only | Links to `sku_prices.import_batch_id` |
| `import_approval_queue` (if exists) | PRICING | Approval workflow for catalog/pricing imports | PRICING only | Prevents silent master-data changes |
| `import_errors` / `import_logs` (if exists) | PRICING | Error traceability and diagnostics | PRICING only | Required for audit-ready import pipeline |

**If any of these tables are not yet in schema, they remain PRICING-owned reserved tables (no ownership drift to other modules).**

⸻

## 3) Locked Behavioral Contracts (PRICING ↔ Other Modules)

### 3.1 PRICING ↔ CIM (SKU Identity Boundary)
- CIM owns identity (`catalog_skus`, `makes`, `series`, `products` transitional)
- PRICING owns price rows (`sku_prices`)
- PRICING must not mutate SKU identity fields (OEM catalog no, make/series identity) without CIM approval.

### 3.2 PRICING ↔ QUO (Workspace Boundary)
- QUO consumes pricing (lookup) and stores snapshotted applied values in workspace (`quote_bom_items.rate`, `rate_source`)
- QUO must not write into `sku_prices`
- PRICING changes affect future computations, not retroactive quotation history unless QUO explicitly applies (Policy-1 apply-recalc).

### 3.3 PRICING ↔ AUDIT
- PRICING must log:
  - imports / batch approvals (if implemented)
  - price rule changes (if any)
- Audit storage remains AUDIT-owned.

⸻

## 4) Explicit Non-Goals (Prevent Scope Drift)

**PRICING module does not own:**
- quotation workspaces (`quotations`, `quote_boms`, `quote_bom_items`)
- catalog identity/taxonomy masters (`categories`, `catalog_skus`, `makes`, `series`)
- discount rules (quotation-scoped `discount_rules`)
- tax profiles (`tax_profiles`)
- audit storage tables

**PRICING owns only:**
- price truth
- effective dating
- import governance + traceability (where present)

⸻

## 5) Enforcement Expectations (Freeze Gate)

**Must be true in implementation:**
- `sku_prices` is treated as append-only price history
- price lookup uses effective dating (`effective_from`/`to`)
- only PRICING endpoints/services perform:
  - price imports
  - batch approvals
  - price row creation
- QUO may compute and snapshot, but cannot overwrite pricing truth
- CIM identity changes do not silently rewrite pricing history

⸻

## 6) Evidence References (Where to Verify)

- **Schema canon migrations:** `backend/alembic/versions/*schema_canon*`
- **Search:** CREATE TABLE price_lists, CREATE TABLE sku_prices, CREATE TABLE import_batches
- **Pricing computation contracts:**
  - QUO compute path snapshots rates in quotation workspace
- **v1.2 mapping reference:**
  - `docs/PHASE_5/02_FREEZE_GATE/A2_Module_Ownership_Matrix/A2.1b_v1.2_Column_Coverage_Map.md`

⸻

## 7) Freeze Gate Compliance

**Freeze Gate Checklist Item:** A2.6 — PRICING table ownership  
**Status:** ✅ VERIFIED  
**Approval:** ✅ APPROVED

⸻

## Next Task

➡️ **A2.7** — AUDIT module ownership (`audit_logs`, audit event schema, write boundaries)

