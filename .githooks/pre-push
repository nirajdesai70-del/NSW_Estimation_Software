#!/usr/bin/env bash
set -euo pipefail

# Run pre-commit hooks configured for the pre-push stage.
# This repo uses core.hooksPath=.githooks (do not use `pre-commit install`).

PYTHON_BIN="${PYTHON_BIN:-python3}"

if command -v "$PYTHON_BIN" >/dev/null 2>&1; then
  exec "$PYTHON_BIN" -m pre_commit run --hook-stage pre-push --show-diff-on-failure
fi

if command -v python >/dev/null 2>&1; then
  exec python -m pre_commit run --hook-stage pre-push --show-diff-on-failure
fi

echo "pre-push: python not found; cannot run pre_commit hooks."
echo "tip: pip install pre-commit && pre-commit --version"
exit 1

